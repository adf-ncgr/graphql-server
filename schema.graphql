## This schema is based on the InterMine data model.
## In principle it could be generated from the model XML file:
## https://github.com/legumeinfo/minimine/blob/main/dbmodel/build/resources/main/genomic_model.xml

################
## INTERFACES ##
################

# <class name="Annotatable" is-interface="true">
# 	<attribute name="primaryIdentifier" type="java.lang.String" term="http://semanticscience.org/resource/SIO_000673"/>
# 	<collection name="ontologyAnnotations" referenced-type="OntologyAnnotation" reverse-reference="subject" term="http://semanticscience.org/resource/SIO_000255"/>
# 	<collection name="publications" referenced-type="Publication" reverse-reference="entities" term="http://purl.org/dc/terms/bibliographicCitation"/>
# </class>
interface Annotatable {
  id: ID!
  identifier: String!
  # ontologyAnnotations
  # publications
}

# <class name="BioEntity" extends="Annotatable" is-interface="true" term="">
# 	<attribute name="description" type="java.lang.String"/>
# 	<attribute name="symbol" type="java.lang.String" term="http://www.w3.org/2004/02/skos/core#prefLabel"/>
# 	<attribute name="name" type="java.lang.String" term="http://www.w3.org/2000/01/rdf-schema#label"/>
# 	<attribute name="assemblyVersion" type="java.lang.String"/>
# 	<attribute name="annotationVersion" type="java.lang.String"/>
# 	<attribute name="secondaryIdentifier" type="java.lang.String" term="http://semanticscience.org/resource/SIO_000673"/>
# 	<reference name="organism" referenced-type="Organism" term="http://purl.org/net/orth#organism"/>
# 	<reference name="strain" referenced-type="Strain" term="http://semanticscience.org/resource/SIO_010055"/>
# 	<collection name="locations" referenced-type="Location" reverse-reference="feature"/>
# 	<collection name="synonyms" referenced-type="Synonym" reverse-reference="subject" term="http://purl.obolibrary.org/obo/synonym"/>
# 	<collection name="crossReferences" referenced-type="CrossReference" reverse-reference="subject" term="http://www.geneontology.org/formats/oboInOwl#hasDbXref"/>
# 	<collection name="dataSets" referenced-type="DataSet" reverse-reference="bioEntities" term="http://semanticscience.org/resource/SIO_001278"/>
# 	<collection name="locatedFeatures" referenced-type="Location" reverse-reference="locatedOn"/>
# </class>
interface BioEntity {
  id: ID!
  identifier: String!
  # ontologyAnnotations
  # publications
  description: String
  symbol: String
  name: String
  assemblyVersion: String
  annotationVersion: String
  organism: Organism
  strain: Strain
  # locations
  # synonyms
  # crossReferences
  # dataSets
  # locatedFeatures
}

# <class name="SequenceFeature" extends="BioEntity" is-interface="true" term="http://purl.obolibrary.org/obo/SO_0000110,http://purl.obolibrary.org/obo/SO:0000110">
# 	<attribute name="score" type="java.lang.Double" term="http://edamontology.org/data_1772"/>
# 	<attribute name="scoreType" type="java.lang.String" term="http://purl.org/dc/terms/type"/>
# 	<attribute name="length" type="java.lang.Integer" term="http://purl.org/dc/terms/SizeOrDuration"/>
# 	<reference name="sequenceOntologyTerm" referenced-type="SOTerm"/>
# 	<reference name="supercontigLocation" referenced-type="Location"/>
# 	<reference name="chromosomeLocation" referenced-type="Location"/>
# 	<reference name="supercontig" referenced-type="Supercontig"/>
# 	<reference name="sequence" referenced-type="Sequence"/>
# 	<reference name="chromosome" referenced-type="Chromosome" term="http://purl.org/dc/terms/isPartOf"/>
# 	<collection name="overlappingFeatures" referenced-type="SequenceFeature"/>
# 	<collection name="childFeatures" referenced-type="SequenceFeature"/>
# </class>
interface SequenceFeature {
  id: ID!
  identifier: String!
  # ontologyAnnotations
  # publications
  description: String
  symbol: String
  name: String
  assemblyVersion: String
  annotationVersion: String
  organism: Organism
  strain: Strain
  # locations
  # synonyms
  # crossReferences
  # dataSets
  # locatedFeatures
  # score
  # scoreType
  length: Int
  # sequenceOntologyTerm
  # supercontigLocation
  # chromosomeLocation
  # supercontig
  # sequence
  # chromosome
  # overlappingFeatures
  # childFeatures
}

###########
## TYPES ##
###########

# <class name="Gene" extends="SequenceFeature" is-interface="true" term="http://purl.obolibrary.org/obo/SO_0000704,http://purl.obolibrary.org/obo/SO:0000704">
# 	<attribute name="briefDescription" type="java.lang.String" term="http://semanticscience.org/resource/SIO_000136"/>
# 	<reference name="upstreamIntergenicRegion" referenced-type="IntergenicRegion"/>
# 	<reference name="downstreamIntergenicRegion" referenced-type="IntergenicRegion"/>
# 	<collection name="flankingRegions" referenced-type="GeneFlankingRegion" reverse-reference="gene"/>
# 	<collection name="transcripts" referenced-type="Transcript" reverse-reference="gene"/>
# 	<collection name="introns" referenced-type="Intron" reverse-reference="genes"/>
# 	<collection name="proteins" referenced-type="Protein" reverse-reference="genes" term="https://semanticscience.org/resource/SIO_010078"/>
# 	<collection name="alleles" referenced-type="Allele" reverse-reference="gene"/>
# 	<collection name="geneFamilyAssignments" referenced-type="GeneFamilyAssignment"/>
# 	<collection name="CDSs" referenced-type="CDS" reverse-reference="gene"/>
# 	<collection name="proteinDomains" referenced-type="ProteinDomain" reverse-reference="genes"/>
# 	<collection name="exons" referenced-type="Exon" reverse-reference="gene"/>
# 	<collection name="pathways" referenced-type="Pathway" reverse-reference="genes"/>
# 	<collection name="regulatoryRegions" referenced-type="RegulatoryRegion" reverse-reference="gene"/>
# 	<collection name="UTRs" referenced-type="UTR" reverse-reference="gene"/>
# </class>
type Gene implements SequenceFeature {
  id: ID!
  identifier: String!
  # ontologyAnnotations
  # publications
  description: String
  symbol: String
  name: String
  assemblyVersion: String
  annotationVersion: String
  organism: Organism
  strain: Strain
  # locations
  # synonyms
  # crossReferences
  # dataSets
  # locatedFeatures
  # score
  # scoreType
  length: Int
  # sequenceOntologyTerm
  # supercontigLocation
  # chromosomeLocation
  # supercontig
  # sequence
  # chromosome
  # overlappingFeatures
  # childFeatures
  # briefDescription
  # upstreamIntergenicRegion
  # downstreamIntergenicRegion
  # flankingRegions
  # transcripts
  # introns
  # proteins
  # alleles
  geneFamilyAssignments: [GeneFamilyAssignment]
  # CDSs
  proteinDomains: [ProteinDomain]
  # exons
  # pathways
  # regulatoryRegions
  # UTRs
}

# <class name="GeneFamilyAssignment" is-interface="true" term="">
# 	<attribute name="bestDomainScore" type="java.lang.Double"/>
# 	<attribute name="score" type="java.lang.Double"/>
# 	<attribute name="evalue" type="java.lang.Double"/>
# 	<reference name="geneFamily" referenced-type="GeneFamily"/>
# </class>
type GeneFamilyAssignment {
  id: ID!
  bestDomainScore: Float
  score:  Float
  evalue: Float
  geneFamily: GeneFamily!
}

# <class name="GeneFamily" extends="Annotatable" is-interface="true" term="">
# 	<attribute name="description" type="java.lang.String"/>
# 	<attribute name="version" type="java.lang.String"/>
# 	<attribute name="size" type="java.lang.Integer"/>
# 	<reference name="phylotree" referenced-type="Phylotree" reverse-reference="geneFamily"/>
# 	<collection name="genes" referenced-type="Gene"/>
# 	<collection name="proteins" referenced-type="Protein"/>
# 	<collection name="proteinDomains" referenced-type="ProteinDomain" reverse-reference="geneFamilies"/>
# 	<collection name="dataSets" referenced-type="DataSet"/>
# 	<collection name="tallies" referenced-type="GeneFamilyTally" reverse-reference="geneFamily"/>
# </class>
type GeneFamily implements Annotatable {
  id: ID!
  identifier: String!
  # ontologyAnnotations
  # publications
  description: String
  version: String
  size: Int
  phylotree: Phylotree
  genes: [Gene]
  # proteins: [Protein]
  proteinDomains: [ProteinDomain]
  # tallies: [GeneFamilyTally]
}

# <class name="GWAS" extends="Annotatable" is-interface="true" term="">
# 	<attribute name="genotypingPlatform" type="java.lang.String"/>
# 	<attribute name="description" type="java.lang.String"/>
# 	<attribute name="genotypes" type="java.lang.String"/>
# 	<attribute name="genotypingMethod" type="java.lang.String"/>
# 	<attribute name="synopsis" type="java.lang.String"/>
# 	<reference name="organism" referenced-type="Organism"/>
# 	<reference name="dataSet" referenced-type="DataSet"/>
# 	<collection name="results" referenced-type="GWASResult" reverse-reference="gwas"/>
# </class>
type GWAS {
  id: ID!
  identifier: String!
  # ontologyAnnotations
  # publications
  genotypingPlatform: String
  description: String
  genotypes: String
  genotypingMethod: String
  synopsis: String
  organism: Organism
  # dataSet
  results: [GWASResult]
}
  
# <class name="GWASResult" is-interface="true" term="">
# 	<attribute name="pValue" type="java.lang.Double"/>
# 	<attribute name="markerName" type="java.lang.String"/>
# 	<reference name="gwas" referenced-type="GWAS" reverse-reference="results"/>
# 	<reference name="trait" referenced-type="Trait" reverse-reference="gwasResults"/>
# 	<reference name="dataSet" referenced-type="DataSet"/>
# 	<collection name="markers" referenced-type="GeneticMarker" reverse-reference="gwasResults"/>
# </class>
type GWASResult {
  id: ID!
  pValue: Float
  markerName: String
  gwas: GWAS
  trait: Trait
  # dataSet
  # markers
}

# <class name="Ontology" is-interface="true" term="http://semanticscience.org/resource/SIO_001391">
# 	<attribute name="url" type="java.lang.String" term="http://edamontology.org/data_1052"/>
# 	<attribute name="name" type="java.lang.String" term="http://www.w3.org/2000/01/rdf-schema#label"/>
# 	<collection name="dataSets" referenced-type="DataSet"/>
# </class>
type Ontology {
  id: ID!
  url: String
  name: String
  # dataSets
}

# <class name="OntologyTerm" is-interface="true" term="http://semanticscience.org/resource/SIO_000275">
# 	<attribute name="identifier" type="java.lang.String" term="http://semanticscience.org/resource/SIO_000675"/>
# 	<attribute name="description" type="java.lang.String" term="http://purl.org/dc/terms/description"/>
# 	<attribute name="obsolete" type="java.lang.Boolean" term="http://ncicb.nci.nih.gov/xml/owl/EVS/Thesaurus.owl#C63553"/>
# 	<attribute name="name" type="java.lang.String" term="http://www.w3.org/2000/01/rdf-schema#label"/>
# 	<attribute name="namespace" type="java.lang.String" term="http://semanticscience.org/resource/SIO_000067"/>
# 	<reference name="ontology" referenced-type="Ontology"/>
# 	<collection name="relations" referenced-type="OntologyRelation"/>
# 	<collection name="synonyms" referenced-type="OntologyTermSynonym"/>
# 	<collection name="ontologyAnnotations" referenced-type="OntologyAnnotation" reverse-reference="ontologyTerm"/>
# 	<collection name="parents" referenced-type="OntologyTerm"/>
# 	<collection name="dataSets" referenced-type="DataSet"/>
# 	<collection name="crossReferences" referenced-type="OntologyTerm"/>
# </class>
type OntologyTerm {
  id: ID!
  identifier: String!
  description: String
  obsolete: Boolean
  name: String
  namespace: String
  ontology: Ontology
  # relations
  # synonyms
  # ontologyAnnotations
  # parents
  # dataSets
  # crossReferences
}

# <class name="Organism" is-interface="true" term="http://semanticscience.org/resource/SIO_010000">
# 	<attribute name="taxonId" type="java.lang.String" term="http://edamontology.org/data_1179"/>
# 	<attribute name="abbreviation" type="java.lang.String"/>
# 	<attribute name="name" type="java.lang.String" term="http://www.w3.org/2000/01/rdf-schema#label"/>
# 	<attribute name="commonName" type="java.lang.String" term="http://edamontology.org/data_2909"/>
# 	<attribute name="description" type="java.lang.String"/>
# 	<attribute name="genus" type="java.lang.String" term="http://edamontology.org/data_1870"/>
# 	<attribute name="species" type="java.lang.String" term="http://edamontology.org/data_1045"/>
# 	<attribute name="shortName" type="java.lang.String" term="http://edamontology.org/data_2909"/>
# 	<collection name="strains" referenced-type="Strain" reverse-reference="organism"/>
# 	<collection name="dataSets" referenced-type="DataSet"/>
# </class>
type Organism {
  id: ID!
  taxonId: Int!
  abbreviation: String
  name: String
  commonName: String
  description: String
  genus: String
  species: String
  strains: [Strain!]
}

## NOTE: about half of Phylonodes have null proteinid so we don't include protein in schema
# <class name="Phylonode" is-interface="true" term="">
# 	<attribute name="identifier" type="java.lang.String"/>
# 	<attribute name="isRoot" type="java.lang.Boolean"/>
# 	<attribute name="length" type="java.lang.Double"/>
# 	<attribute name="numChildren" type="java.lang.Integer"/>
# 	<attribute name="isLeaf" type="java.lang.Boolean"/>
# 	<reference name="protein" referenced-type="Protein" reverse-reference="phylonode"/>
# 	<reference name="tree" referenced-type="Phylotree" reverse-reference="nodes"/>
# 	<reference name="parent" referenced-type="Phylonode" reverse-reference="children"/>
# 	<collection name="children" referenced-type="Phylonode" reverse-reference="parent"/>
# </class>
type Phylonode {
  id: ID!
  identifier: String!
  isRoot: Boolean
  length: Float
  numChildren: Int
  isLeaf: Boolean
  # protein: Protein
  tree: Phylotree
  parent: Phylonode
  children: [Phylonode]
}

# <class name="Phylotree" extends="Annotatable" is-interface="true" term="">
# 	<attribute name="numLeaves" type="java.lang.Integer"/>
# 	<reference name="geneFamily" referenced-type="GeneFamily" reverse-reference="phylotree"/>
# 	<collection name="nodes" referenced-type="Phylonode" reverse-reference="tree"/>
# 	<collection name="dataSets" referenced-type="DataSet"/>
# </class>
type Phylotree {
  id: ID!
  identifier: String!
  # ontologyAnnotations
  # publications
  numLeaves: Int
  geneFamily: GeneFamily
  nodes: [Phylonode]
  # dataSets
}

# <class name="Protein" extends="BioEntity" is-interface="true" term="http://semanticscience.org/resource/SIO_010043,http://purl.uniprot.org/core/Protein">
# 	<attribute name="md5checksum" type="java.lang.String" term="http://purl.uniprot.org/core/md5Checksum"/>
# 	<attribute name="primaryAccession" type="java.lang.String" term="http://purl.obolibrary.org/obo/ERO_0000405"/>
# 	<attribute name="molecularWeight" type="java.lang.Double" term="http://purl.uniprot.org/core/mass"/>
# 	<attribute name="length" type="java.lang.Integer" term="http://purl.org/dc/terms/SizeOrDuration"/>
# 	<attribute name="isPrimary" type="java.lang.Boolean"/>
# 	<reference name="phylonode" referenced-type="Phylonode" reverse-reference="protein"/>
# 	<reference name="transcript" referenced-type="Transcript" reverse-reference="protein"/>
# 	<reference name="CDS" referenced-type="CDS" reverse-reference="protein"/>
# 	<reference name="sequence" referenced-type="Sequence" term="http://purl.uniprot.org/core/sequence"/>
# 	<collection name="genes" referenced-type="Gene" reverse-reference="proteins" term="http://semanticscience.org/resource/SIO_010079"/>
# 	<collection name="geneFamilyAssignments" referenced-type="GeneFamilyAssignment"/>
# 	<collection name="proteinMatches" referenced-type="ProteinMatch" reverse-reference="protein"/>
# </class>
type Protein {
  id: ID!
  identifier: String!
  # ontologyAnnotations
  # publications
  # description: String - not populated in LIS mines 5.1.0.1
  # symbol: String - not populated in LIS mines 5.1.0.1
  # name: String - not populated in LIS mines 5.1.0.1
  assemblyVersion: String
  annotationVersion: String
  organism: Organism
  strain: Strain
  # locations
  # synonyms
  # crossReferences
  # dataSets
  # locatedFeatures
  md5checksum: String
  # primaryAccession: String - not populated in LIS mines 5.1.0.1
  # molecularWeight: Float - not populated in LIS mines 5.1.0.1
  length: Int
  isPrimary: Boolean
  # phylonode: Phylonode - not populated in LIS mines 5.1.0.1
  # transcript
  # CDS
  # sequence
  genes: [Gene]
  geneFamilyAssignments: [GeneFamilyAssignment]
  # proteinMatches
}
  
# <class name="ProteinDomain" extends="Annotatable" is-interface="true" term="http://purl.obolibrary.org/obo/SO:0000417">
# 	<attribute name="description" type="java.lang.String"/>
# 	<attribute name="type" type="java.lang.String"/>
# 	<attribute name="name" type="java.lang.String"/>
# 	<attribute name="shortName" type="java.lang.String"/>
# 	<collection name="genes" referenced-type="Gene" reverse-reference="proteinDomains"/>
# 	<collection name="geneFamilies" referenced-type="GeneFamily" reverse-reference="proteinDomains"/>
# 	<collection name="childFeatures" referenced-type="ProteinDomain"/>
# 	<collection name="foundIn" referenced-type="ProteinDomain"/>
# 	<collection name="parentFeatures" referenced-type="ProteinDomain"/>
# 	<collection name="contains" referenced-type="ProteinDomain"/>
# </class>
type ProteinDomain implements Annotatable {
  id: ID!
  identifier: String!
  # ontologyAnnotations
  # publications
  description: String
  type: String
  name: String
  shortName: String
  genes: [Gene]
  geneFamilies: [GeneFamily]
  # childFeatures: [ProteinDomain]
  # foundIn: [ProteinDomain]
  # parentFeatures: [ProteinDomain]
  # contains: [ProteinDomain]
}

# <class name="QTL" is-interface="true" term="http://purl.obolibrary.org/obo/SO:0001645">
# 	<attribute name="identifier" type="java.lang.String"/>
# 	<attribute name="lod" type="java.lang.Double"/>
# 	<attribute name="likelihoodRatio" type="java.lang.Double"/>
# 	<attribute name="end" type="java.lang.Double"/>
# 	<attribute name="markerNames" type="java.lang.String"/>
# 	<attribute name="markerR2" type="java.lang.Double"/>
# 	<attribute name="start" type="java.lang.Double"/>
# 	<attribute name="peak" type="java.lang.Double"/>
# 	<reference name="trait" referenced-type="Trait" reverse-reference="qtls"/>
# 	<reference name="qtlStudy" referenced-type="QTLStudy" reverse-reference="qtls"/>
# 	<reference name="linkageGroup" referenced-type="LinkageGroup" reverse-reference="qtls"/>
# 	<reference name="dataSet" referenced-type="DataSet"/>
# 	<collection name="genes" referenced-type="Gene"/>
# 	<collection name="markers" referenced-type="GeneticMarker" reverse-reference="qtls"/>
# </class>
type QTL {
  id: ID!
  identifier: String!
  # lod: Float
  # likelihoodRatio: Float
  end: Float
  markerNames: String
  # markerR2
  start: Float
  # peak
  trait: Trait
  # qtlStudy: QTLStudy
  # linkageGroup
  # dataSet: DataSet
  # genes: [Gene]
  # markers: [GeneticMarker]
}

# <class name="Strain" is-interface="true" term="http://semanticscience.org/resource/SIO_010055">
# 	<attribute name="identifier" type="java.lang.String" term="http://edamontology.org/data_2379"/>
# 	<attribute name="name" type="java.lang.String" term="http://edamontology.org/data_1046"/>
# 	<attribute name="description" type="java.lang.String"/>
# 	<attribute name="origin" type="java.lang.String"/>
# 	<attribute name="accession" type="java.lang.String" term="http://edamontology.org/data_2912"/>
# 	<reference name="organism" referenced-type="Organism" reverse-reference="strains" term="http://purl.org/net/orth#organism"/>
# 	<collection name="dataSets" referenced-type="DataSet"/>
# </class>
type Strain {
  id: ID!
  identifier: String!
  name: String
  description: String
  origin: String
  accession: String
  organism: Organism
}

# <class name="Trait" is-interface="true" term="https://browser.planteome.org/amigo/term/TO:0000387">
# 	<attribute name="description" type="java.lang.String"/>
# 	<attribute name="name" type="java.lang.String"/>
# 	<reference name="qtlStudy" referenced-type="QTLStudy"/>
# 	<reference name="gwas" referenced-type="GWAS"/>
# 	<reference name="dataSet" referenced-type="DataSet"/>
# 	<collection name="qtls" referenced-type="QTL" reverse-reference="trait"/>
# 	<collection name="ontologyTerms" referenced-type="OntologyTerm"/>
# 	<collection name="gwasResults" referenced-type="GWASResult" reverse-reference="trait"/>
# </class>
type Trait {
  id: ID!
  description: String
  name: String
  # qtlStudy: QTLStudy
  # gwas: GWAS
  # dataset
  qtls: [QTL]
  ontologyTerms: [OntologyTerm]
  gwasResults: [GWASResult]
}

#############
## QUERIES ##
#############

type Query {

  ## single objects by ID
  gene(id: ID!): Gene
  geneFamilyAssignment(id: ID!): GeneFamilyAssignment
  geneFamily(id: ID!): GeneFamily
  gwas(id: ID!): GWAS
  gwasResult(id: ID!): GWASResult
  ontology(id: ID!): Ontology
  ontologyTerm(id: ID!): OntologyTerm
  organism(id: ID!): Organism
  phylonode(id: ID!): Phylonode
  phylotree(id: ID!): Phylotree
  protein(id: ID!): Protein
  proteinDomain(id: ID!): ProteinDomain
  qtl(id: ID!): QTL
  strain(id: ID!): Strain
  trait(id: ID!): Trait

  # organisms(genus: String, species: String, start: Int, size: Int): [Organism]
  # strains(organismId: ID!): [Strain]
  # genes(strain: String, family: String, description: String, start: Int, size: Int): [Gene]
  # geneSearch(keyword: String!, start: Int, size: Int): [Gene]
  # geneFamilies(start: Int, size: Int): [GeneFamily]
  # traits(description: String, start: Int, size: Int): [Trait]
  # traitSearch(keyword: String!, start: Int, size: Int): [Trait]
}
